<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ðŸ”¥ Restaurant: Add</title>
  <!-- Linking Tachyon CSS -->
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css" />
</head>

<body class="mh4 mt4 ma0-ns sans-serif">
  <!-- Header -->
  <article class="mw7 center ph3 ph5-ns tc pv5 bg-light-gray off-black">
    <h1 class="fw6 f3 f2-ns lh-title mt0 mb3">
      ðŸ”¥ Hot Restaurant ðŸ”¥
    </h1>
    <div>
      <a class="f6 br-pill bg-blue no-underline white grow pv2 ph3 dib mr3" href="/">
        View Reservations
      </a>
    </div>
  </article>
  <!-- Reservation Form -->
  </article>
  <section class="center mw7 hidden ba b--black-10">
    <h1 class="f4 bg-near-white br--top black-60 mv0 pv2 ph3">Make Reservations</h1>
    <div class="pa3 bt b--black-10">
      <main class="black-80">
        <form class="center" method="POST">
          <fieldset id="sign_up" class="ba b--transparent ph0 mh0">
            <div class="mt3">
              <label class="db fw6 lh-copy f6" for="guest-name">Name</label>
              <input class="pa2 input-reset ba bg-transparent w-100" type="text" name="guest-name" id="guest-name">
            </div>
            <div class="mt3">
              <label class="db fw6 lh-copy f6" for="email-address">Email</label>
              <input class="pa2 input-reset ba bg-transparent w-100" type="email" name="email-address"
                id="email-address">
            </div>
            <div class="mt3">
              <label class="db fw6 lh-copy f6" for="phone-number">Phone</label>
              <input class="pa2 input-reset ba bg-transparent w-100" type="text" name="phone-number" id="phone-number">
            </div>
            <div class="mt3">
              <label class="db fw6 lh-copy f6" for="unique-id">Unique ID</label>
              <input class="pa2 input-reset ba bg-transparent w-100" type="text" name="unique-id" id="unique-id">
            </div>
            <div class="mt3">
              <input id="btn-add"
                class="pointer ba bw0 f6 br-pill bg-blue no-underline white grow pv2 ph3 dib mr3 input-reset"
                type="submit" value="Add">
            </div>
        </form>
      </main>
    </div>
  </section>
  <!-- Control Panel -->
  <section class="center mw7 hidden pv4">
    <p class="tc f6">
      <a href="#" class="link blue">Clear Table</a> | <a href="/api/table" class="link blue">API Table Link</a> | <a href="/api/waitlist" class="link blue">API Wait List</a>
    </p>
  </section>

  <script>
    document.querySelector('form').addEventListener('submit', (event) => {
      event.preventDefault()
    })
    document.querySelector('#btn-add').addEventListener('click', (event) => {
      event.preventDefault()
      let newReservation = {
        name: document.querySelector('#guest-name').value.trim(),
        email: document.querySelector('#email-address').value.trim(),
        phone: document.querySelector('#phone-number').value.trim(),
        uid: document.querySelector('#unique-id').value.trim()
      }
      fetch('/api/reservations', {
        method: 'post',
        body: JSON.stringify(newReservation),
        headers: {
          'Content-Type': 'application/json'
        }
      })
        .then(response => response.json())
        .then(data => {
          console.log('add.html', data)
          alert('Adding Guest...')
          document.querySelector('form').reset()
        })
        // let waitlist = {
        //     name: document.querySelector('#guest-name').value.trim(),
        //     email: document.querySelector('#email-address').value.trim(),
        //     phone: document.querySelector('#phone-number').value.trim(),
        //     uid: document.querySelector('#uniqe-id').value.trim()
        // }
        // fetch('api/waitlist', {
        //     method: 'post',
        //     body: JSON.stringify(waitlist),
        //     headers: {
        //     'Content-Type': 'application/json'
        //     }
        // })
        // .then(response => response.json())
        // .then(data => {
        // console.log('add2.html', data)
        // alert('showing waitlist...')
        // })
    })
  </script>
</body>

</html>